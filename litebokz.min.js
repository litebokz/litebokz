"use strict";class LiteBokz{constructor(){this.settings={},addEventListener("DOMContentLoaded",()=>{this.load()})}resize(){this.scale=innerHeight}load(){this.scale=1,addEventListener("resize",()=>this.resize()),this.resize(),this.themes||(this.themes=[{hue:220,saturate:20,light:13,alpha:.7},{hue:220,saturate:20,light:100,alpha:.7}]),this.tools||(this.tools=["out","in","theme","download","fit","full","exit"]);const t={blurOnExit:!1,gestureToZoom:!0,swipeToSwitchPC:!0,swipeToSwitchMobile:!0,swipeSensitivityPC:10,swipeSensitivityMobile:5,swipeRangePC:.5,swipeRangeMobile:.5,swipeResistancePC:.4,swipeResistanceMobile:1,hasFooter:!0,hasWordmark:!0,tapToHidePanels:!1,tapAwayToClose:!1,zoomIncrement:.15,zoomSpeed:.8,zoomMax:15,zoomMin:1,renderPixelated:700};for(const[e,i]of Object.entries(t))null==this.settings[e]&&(this.settings[e]=i);this.isMobile="ontouchstart"in window||navigator.maxTouchPoints>0;const e=this.settings,i=this.isMobile;null==e.swipeToSwitch&&(e.swipeToSwitch=i?e.swipeToSwitchMobile:e.swipeToSwitchPC),null==e.swipeSensitivity&&(e.swipeSensitivity=i?e.swipeSensitivityMobile:e.swipeSensitivityPC),null==e.swipeRange&&(e.swipeRange=i?e.swipeRangeMobile:e.swipeRangePC),null==e.swipeResistance&&(e.swipeResistance=i?e.swipeResistanceMobile:e.swipeResistancePC),this.fullIcon="M 1 1.3 L 1 1 L 1.3 1 M 1.7 1 L 2 1 L 2 1.3 M 2 1.7 L 2 2 L 1.7 2 M 1.3 2 L 1 2 L 1 1.7",this.minIcon="M 1 1 L 1.3 1.3 M 1.3 1 L 1.3 1.3 L 1 1.3 M 1 2 L 1.3 1.7 M 1 1.7 L 1.3 1.7 L 1.3 2 M 2 2 L 1.7 1.7 M 1.7 2 L 1.7 1.7 L 2 1.7 M 2 1 L 1.7 1.3 M 1.7 1 L 1.7 1.3 L 2 1.3",this.toolIcons={out:'<button class="litebokz-button" id="litebokz-minus" title="zoom out">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path d="M 1.1 1.5 L 1.9 1.5" stroke="#000" stroke-width=".1" fill="none"/>\n                    </svg>\n                </div>\n            </button>',in:'<button class="litebokz-button" id="litebokz-plus" title="zoom in">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path d="M 1.5 1.9 L 1.5 1.1 M 1.1 1.5 L 1.9 1.5" stroke="#000" stroke-width=".1" fill="none"/>\n                    </svg>\n                </div>\n            </button>',theme:'<button class="litebokz-button" id="litebokz-theme" title="change theme">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path d="M 1.3 1 A 0.1 0.1 0 0 0 1.8 1.9 C 1.89 1.84 1.94 1.79 2 1.7 C 1.68 1.85 1.16 1.4 1.3 1" stroke="#000" stroke-width=".1" fill="none"/>\n                    </svg>\n                </div>\n            </button>',download:'<button class="litebokz-button" id="litebokz-download" title="download image">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path d="M 1 1.7 L 1 2 L 2 2 L 2 1.7 M 1.5 1 L 1.5 1.7 M 1.2 1.4 L 1.5 1.7 L 1.8 1.4" stroke="#000" stroke-width=".15" fill="none"/>\n                    </svg>\n                </div>\n            </button>',fit:'<button class="litebokz-button" id="litebokz-fit" title="fit to screen">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path d="M 1 2 L 1 1 L 2 1 L 2 2 Z M 1.3 1.6 L 1.3 1.3 L 1.6 1.3 M 1.7 1.7 L 1.3 1.3" stroke="#000" stroke-width=".1" fill="none"/>\n                    </svg>\n                </div>\n            </button>',full:`<button class="litebokz-button" id="litebokz-fullscreen" title="fullscreen mode">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path id = "litebokz-fullscreen-path" d="${this.fullIcon}" stroke="#000" stroke-width=".1" fill="none"/>\n                    </svg>\n                </div>\n            </button>`,exit:'<button class="litebokz-button" id="litebokz-close" title="exit">\n                <div class = "litebokz-button-main">\n                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                        <path d="M 1.1 1.1 L 1.9 1.9 M 1.1 1.9 L 1.9 1.1" stroke="#000" stroke-width=".1" fill="none"/>\n                    </svg>\n                </div>\n            </button>'},this.active=!1,this.zoomAmt=1,this.zoomSmooth=0,this.camX=0,this.camY=0,this.nameSections={},this.nameDuds=[],this.panelVisible=!1,this.placeholder="https://sites.joachimford.uk/litebokz.jpg",this.init()}makeThemeStart(t){return"theme-"+t}themeOnChange(){}setTheme(t){const e=this.makeThemeStart(this.selectedTheme);this.holder.classList.remove(e),this.selectedTheme=t%this.themes.length,this.holder.classList.add(this.makeThemeStart(this.selectedTheme)),this.themeOnChange()}errorCheck(){if(this.tools.constructor!=Array)return"tools must be an array";if(this.tools.some(t=>"string"!=typeof t))return"tools[] most contain only strings";if(this.tools.some(t=>!this.toolIcons[t]))return"tools[] references a nonexistent button";for(let t=0;t<this.themes.length;t++){const e=this.themes[t];if("number"!=typeof e.hue)return`theme ${t}: hue must be a number`;if("number"!=typeof e.saturate)return`theme ${t}: saturate must be a number`;if("number"!=typeof e.light)return`theme ${t}: light must be a number`;if("number"!=typeof e.alpha)return`theme ${t}: alpha must be a number`}const t=t=>{if("number"!=typeof this.settings.key)return t+" must be a number"};return t("swipeSensitivity"),this.settings.swipeSensitivity<=0?"swipeSensitivity must be a positive number":(t("swipeSensitivityPC"),this.settings.swipeSensitivityPC<=0?"swipeSensitivityPC must be a positive number":(t("swipeSensitivityMobile"),this.settings.swipeSensitivityMobile<=0?"swipeSensitivityMobile must be a positive number":(t("swipeRange"),this.settings.swipeRange<=0?"swipeRange must be a positive number":(t("swipeRangePC"),this.settings.swipeRangePC<=0?"swipeRangePC must be a positive number":(t("swipeRangeMobile"),this.settings.swipeRangeMobile<=0?"swipeRangeMobile must be a positive number":(t("swipeResistance"),this.settings.swipeResistance<=0?"swipeResistance must be a positive number":(t("swipeRangePC"),this.settings.swipeResistancePC<=0?"swipeResistancePC must be a positive number":(t("swipeRangeMobile"),this.settings.swipeResistanceMobile<=0?"swipeResistanceMobile must be a positive number":(t("zoomIncrement"),this.settings.zoomIncrement<0?"zoomIncrement must be a positibe number":(t("zoomSpeed"),t("zoomMin"),t("zoomMax"),this.settings.zoomMax<this.settings.zoomMin?"zoomMax must be greater than zoomMin":this.settings.zoomMin>this.settings.zoomMax?"zoomMin must be greater than zoomMax":this.settings.zoomMin<0?"zoomMin must be a positive number":(t("renderPixelated"),this.settings.renderPixelated<0?"renderPixelated must greater than zero":void 0)))))))))))}init(){if(this.errorCheck())return console.error(this.errorCheck());this.findImages(),this.generate(),this.setTheme(0),this.generateListeners(),this.updateDisplay()}mod(t,e){return(t%e+e)%e}generateListeners(){this.shadow.addEventListener("wheel",t=>this.zoom(t),{passive:!1});let t=!1,e=0,i=0,n=null,s=!1,o=0;const l=()=>1==this.zoomAmt&&!this.roundToDec(this.camX,2)&&!this.roundToDec(this.camY,2),a=()=>{let e=o,i=!1;o>0&&!this.leftGoalImg||o<0&&!this.rightGoalImg?(e*=.2,t||(o*=.7),i=!0):e*=this.settings.swipeResistance,this.image.style.opacity=1-Math.abs(e)/innerWidth,this.image.style.transform=`translate(calc(-50% + ${e}px), -50%)`,this.image.style.transition="0s";const l=this.image.getBoundingClientRect(),h=l.left<innerWidth&&l.right>0;if(!t&&!i)if(s){if(o*=1.3,!h){l.left>innerWidth&&this.image.classList.add("right"),l.right<0&&this.image.classList.add("left"),this.image.style.opacity="",this.image.style.transform="";const t=this.image;requestAnimationFrame(()=>t.style.transition=""),l.left>=innerWidth&&(this.image=this.leftTemplateImg,this.image.style.opacity="",this.image.style.transform="",this.image.style.transition="",this.selectImage(this.leftGoalImg)),l.right<=0&&(this.image=this.rightTemplateImg,this.image.style.opacity="",this.image.style.transform="",this.image.style.transition="",this.selectImage(this.rightGoalImg)),s=!1}}else o*=.7;Math.abs(o)>.01&&h?n=requestAnimationFrame(a):(n=null,this.image.style.opacity="",this.image.style.transform="",this.image.style.transition="")};this.mouseDown(this.displayHold,n=>{t=!0,e=n.clientX,i=n.clientY}),this.mouseMove(this.displayHold,s=>{if(!t)return;const h=s.clientX,r=s.clientY,m=h-e,d=r-i;this.camX+=m,this.camY+=d,this.updateDisplay(),l()&&this.settings.swipeToSwitch?(o=m,null==n&&a()):(e=s.clientX,i=s.clientY)}),this.mouseUp(window,e=>{if(t=!1,n){const t=this.settings.swipeSensitivity,e=this.settings.swipeRange,i=this.image.getBoundingClientRect(),n=i.x+i.width/2+o*t;s=Math.abs(n-innerWidth/2)>innerWidth*e}})}click=(t,e=(()=>{}))=>{if(!t)return;const i="onpointerdown"in window?"pointerdown":"ontouchstart"in window?"touchstart":"onmousedown"in window?"mousedown":"click";t.addEventListener(i,e)};clickOverride=(t,e=(()=>{}))=>{t&&("onpointerdown"in window?t.onpointerdown=e:"ontouchstart"in window?t.ontouchstart=e:"onmousedown"in window?t.onmousedown=e:t.onclick=e)};mouseDown=(t,e=(()=>{}))=>{if(!t)return;const i="onpointerdown"in window?"pointerdown":"ontouchstart"in window?"touchstart":"mousedown";t.addEventListener(i,e)};mouseMove=(t,e=(()=>{}))=>{if(!t)return;const i="onpointermove"in window?"pointermove":"ontouchmove"in window?"touchmove":"mousemove";t.addEventListener(i,e)};mouseUp=(t,e=(()=>{}))=>{if(!t)return;const i="onpointerup"in window?"pointerup":"ontouchend"in window?"touchend":"mouseup";t.addEventListener(i,e)};roundToDec(t,e){const i=10**e;return Math.round(t*i)/i}capZoom(t){return Math.max(this.settings.zoomMin,Math.min(this.settings.zoomMax,t))}updateDisplay(t=null){this.zoomAmt=this.capZoom(this.zoomAmt);const e=this.image.getBoundingClientRect(),i=t||1,n=e.width/2*i,s=e.height/2*i,o=1*n/Math.max(this.zoomAmt,1),l=1*s/Math.max(this.zoomAmt,1);this.camX>n-o&&(this.camX=n-o),this.camX<-n+o&&(this.camX=-n+o),this.camY>s-l&&(this.camY=s-l),this.camY<-s+l&&(this.camY=-s+l),this.minusBtn&&(this.minusBtn.classList.remove("disable"),this.zoomAmt<=this.settings.zoomMin&&this.minusBtn.classList.add("disable")),this.plusBtn&&(this.plusBtn.classList.remove("disable"),this.zoomAmt>=this.settings.zoomMax&&this.plusBtn.classList.add("disable")),this.fitBtn&&(this.fitBtn.classList.remove("disable"),1!=this.zoomAmt||this.roundToDec(this.camX,2)||this.roundToDec(this.camY,2)||this.fitBtn.classList.add("disable")),this.imageHolder.style.transform=`\n            translate(\n                ${this.camX}px,\n                ${this.camY}px)\n            scale(${this.zoomAmt})`}zoom(t){if(t.ctrlKey&&t.preventDefault(),!this.imageHolder||!this.image)return;const e=this.displayHold.getBoundingClientRect(),i=.5+(e.y+e.height/2-innerHeight/2)/innerHeight,n=this.settings.zoomSpeed/this.scale,s=-t.deltaY*n,o=this.zoomAmt;let l=this.zoomAmt+this.zoomAmt*s;if(l=this.capZoom(l),l==o)return void this.updateDisplay();const a=t.clientX,h=t.clientY,r=innerWidth,m=innerHeight,d=(a/r-.5)*innerWidth,c=(h/m-i)*innerHeight,g=l/o;this.camX=d-(d-this.camX)*g,this.camY=c-(c-this.camY)*g,this.zoomAmt=l,this.updateDisplay(g)}open(){this.holder&&(document.documentElement.style.overflow="hidden",this.holder.classList.add("litebokz-open"),this.zoomAmt=1,this.camX=0,this.camY=0,this.togglePanels(!0),this.updateDisplay())}close(){this.holder&&(document.documentElement.style.overflow="auto",this.holder.classList.remove("litebokz-open"),this.toggleFullscreen(!1),this.togglePanels(!1))}loadImage(t,e){e?(t.src=e.src,t.dataset.lbName=e.dataset.lbName||""):(t.src=this.placeholder,t.dataset.lbName=""),t.onload=()=>{t.classList.remove("crisp"),t.naturalWidth+t.naturalHeight<2*this.settings.renderPixelated&&t.classList.add("crisp"),t.ratio=t.naturalWidth/t.naturalHeight,t.style.aspectRatio=t.ratio,t._litebokzResize&&removeEventListener("resize",t._litebokzResize),t._litebokzResize=()=>{const e=this.display.getBoundingClientRect();e.width/e.height>=t.ratio?(t.style.width="auto",t.style.height=innerWidth/t.ratio+"px"):(t.style.width=innerHeight*t.ratio+"px",t.style.height="auto")},addEventListener("resize",t._litebokzResize),t._litebokzResize()}}selectImage(t){if(!this.image)return;this.image.classList.remove("left","right"),this.loadImage(this.image,t),this.text.innerText=null!=t.dataset.lbAlt?t.dataset.lbAlt:t.alt||"";const e=t.dataset.lbName||"",i=e?this.nameSections[e]:this.nameDuds,n=i.indexOf(t);this.leftGoalImg=i[n-1],this.leftTemplateImg=this["image"+(this.mod(this.image.litebokzID-2,3)+1)],this.rightGoalImg=i[n+1],this.rightTemplateImg=this["image"+(this.mod(this.image.litebokzID,3)+1)],this.leftTemplateImg.classList.remove("right"),this.leftTemplateImg.classList.add("left"),this.loadImage(this.leftTemplateImg,this.leftGoalImg),this.rightTemplateImg.classList.remove("left"),this.rightTemplateImg.classList.add("right"),this.loadImage(this.rightTemplateImg,this.rightGoalImg),n>0?(this.navLeft.classList.remove("hidden"),this.clickOverride(this.navLeft,()=>{this.image.classList.add("right"),this.image=this.leftTemplateImg,this.selectImage(this.leftGoalImg)})):(this.navLeft.classList.add("hidden"),this.clickOverride(this.navLeft,()=>{})),n<i.length-1?(this.navRight.classList.remove("hidden"),this.clickOverride(this.navRight,()=>{this.image.classList.add("left"),this.image=this.rightTemplateImg,this.selectImage(this.rightGoalImg)})):(this.navRight.classList.add("hidden"),this.clickOverride(this.navRight,()=>{}))}toggleOpen(t){this.active=null!=t?t:!this.active,this.active?this.open():this.close()}toggleFullscreen(t){return document.fullscreenElement?(document.exitFullscreen(),!1):0!=t&&(document.documentElement.requestFullscreen(),!0)}togglePanels(t){this.panelVisible=null!=t?t:this.panelVisible=!this.panelVisible,this.header.classList.toggle("litebokz-panel-hidden",!this.panelVisible),this.footer.classList.toggle("litebokz-panel-hidden",!this.panelVisible)}findImages(){const t=t=>{let e=t.dataset.lbImage?(()=>{const e=new Image;return e.src=t.dataset.lbImage,Object.assign(e.dataset,t.dataset),e})():"img"==t.tagName.toLowerCase()?t:t.querySelector("img");t.dataset.lbName?(e.dataset.lbName=t.dataset.lbName,this.nameSections[t.dataset.lbName]?this.nameSections[t.dataset.lbName].push(e):this.nameSections[t.dataset.lbName]=[e]):this.nameDuds.push(e),this.click(t,()=>{this.toggleOpen(!0),this.selectImage(e)})},e=document.getElementsByClassName("litebokz");for(let i=0;i<e.length;i++){const n=e[i];t(n)}new MutationObserver(e=>{e.forEach(e=>{e.addedNodes.forEach(e=>{e.nodeType==Node.ELEMENT_NODE&&(e.classList.contains("litebokz")||e.querySelector(".litebokz"))&&t(e)})})}).observe(document.documentElement,{childList:!0,subtree:!0})}sanitize(t){return t.replace(/[^a-z0-9]+/gi,"-").replace(/-+/g,"-").replace(/^-|-$/g,"").toLowerCase()}generate(){const t=document.createElement("div");document.documentElement.appendChild(t);const e=t.attachShadow({mode:"open"}),i=".5s cubic-bezier(.5, .5, 0, 1)",n=".1s cubic-bezier(.5, .5, 0, 1)",s=`<style>\n            * {\n                box-sizing: border-box;\n                user-select: none;\n            }\n\n            .litebokz-hold {\n                position: fixed;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                z-index: 9999;\n                pointer-events: none;\n            }\n\n            .litebokz-hold.litebokz-open {\n                pointer-events: all;\n            }\n\n            .litebokz-hold::before {\n                content: '';\n                position: absolute;\n                top: 0;\n                left: 0;\n                width: 100%;\n                height: 100%;\n                opacity: 0;\n                backdrop-filter: blur(10vw);\n                transition: ${i};\n                pointer-events: none;\n            }\n\n            .litebokz-hold.litebokz-open::before {\n                opacity: 1;\n            }\n\n            .litebokz-main {\n                position: relative;\n                display: flex;\n                flex-direction: column;\n                width: 100%;\n                height: 100%;\n                transition: ${i};\n            }\n\n            ${(()=>{let t="";for(let e=0;e<this.themes.length;e++){const i=this.themes[e],n="."+this.makeThemeStart(e);t+=`\n                ${n} .litebokz-main {\n                    color: hsl(0,0%,${i.light<50?100:0}%);\n\n                    background-color: hsla(\n                        ${i.hue},\n                        ${i.saturate}%,\n                        ${i.light-10}%,\n                        0);\n                }\n                ${n}.litebokz-open .litebokz-main {\n                    background-color: hsla(\n                        ${i.hue},\n                        ${i.saturate}%,\n                        ${i.light-10}%,\n                        ${i.alpha});\n                }`}return t})()}\n\n            .litebokz-header-hold {\n                width: 100%;\n                height: 50px;\n                flex: 1 0 auto;\n            }\n\n            .litebokz-footer-hold {\n                width: 100%;\n                height: 50px;\n                flex: 1 0 auto;\n                ${this.settings.hasFooter?"":"display: none;"}\n            }\n\n            .litebokz-header,\n            .litebokz-footer {\n                display: flex;\n                gap: 10px;\n                position: relative;\n                z-index: 1;\n                flex: 1 0 auto;\n                width: 100%;\n                height: 100%;\n                transition: ${i}, transform .5s cubic-bezier(1, 0, 0, 1);\n                align-items: center;\n            }\n\n            ${(()=>{let t="";for(let e=0;e<this.themes.length;e++){const i=this.themes[e],n="."+this.makeThemeStart(e);t+=`\n                ${n} .litebokz-header,\n                ${n} .litebokz-footer {\n                    background-color: hsla(\n                        ${i.hue},\n                        ${i.saturate}%,\n                        ${i.light}%,\n                        ${i.alpha});\n\n                    border: 0px solid hsla(\n                        ${i.hue},\n                        ${i.saturate+10}%,\n                        ${i.light+15}%,\n                        ${i.alpha+.3})\n                }`}return t})()}\n\n            .litebokz-header {\n                transform: translateY(-100%);\n                border-bottom-width: 1px !important\n            }\n            .litebokz-footer {\n                transform: translateY(100%);\n                border-top-width: 1px !important;\n            }\n\n            .litebokz-open .litebokz-header,\n            .litebokz-open .litebokz-footer {transform: translateY(0)}\n\n            .litebokz-header.litebokz-panel-hidden {transform: translateY(-100%)}\n            .litebokz-footer.litebokz-panel-hidden {transform: translateY(100%)}\n\n            .litebokz-display-hold {\n                position: relative;\n                flex: 1 1 auto;\n                height: 100%;\n            }\n\n            .litebokz-display {\n                height: 100%\n            }\n\n            /* -- image -- */\n            .litebokz-img-holder {\n                height: 100%;\n                transform: scale(1);\n            }\n\n            .litebokz-display .litebokz-img {\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                width: auto;\n                height: auto;\n                max-width: calc(100% - 30px);\n                max-height: calc(100% - 30px);\n                border-radius: 5px;\n                box-shadow: 2px 2px 5px #0004;\n                opacity: 0;\n                transform: translate(-50%, -50%) scale(.9);\n                ${this.settings.blurOnExit?"filter: blur(.2vw)":""};\n                transition: transform ${i}, opacity ${i};\n                cursor: grab;\n                image-rendering: auto;\n            }\n\n            .litebokz-img.crisp {\n                image-rendering: crisp-edges\n            }\n\n            .litebokz-img:active {\n                cursor: grabbing\n            }\n\n            /* --- Switch images --- */\n            .litebokz-open .litebokz-img {\n                opacity: 1;\n                transform: translate(-50%, -50%);\n                filter: blur(0);\n                z-index: 1;\n            }\n\n            .litebokz-open .litebokz-img.left {\n                opacity: 0;\n                transform: translate(-100%, -50%) scale(.7);\n                z-index: 0;\n            }\n            .litebokz-open .litebokz-img.right {\n                opacity: 0;\n                transform: translate(0%, -50%) scale(.7);\n                z-index: 0;\n            }\n\n            .litebokz-header-right {\n                margin-left: auto;\n                margin-right: 0;\n                height: 100%;\n                display: flex;\n                align-items: center;\n            }\n\n            /* Normal button */\n            .litebokz-button {\n                width: 100%;\n                height: 100%;\n                background-color: transparent;\n                border: none;\n                padding: 4px 6px;\n                cursor: pointer;\n                display: flex;\n                justify-content: center;\n                pointer-events: all\n            }\n\n            .litebokz-button.disable {\n                pointer-events: none\n            }\n\n            .litebokz-header .litebokz-button .litebokz-button-main {\n                position: relative;\n                width: auto;\n                height: 100%;\n                aspect-ratio: 1;\n                border-radius: 20%;\n                transform: scale(1);\n                transition: ${n};\n                overflow: hidden;\n            }\n\n            ${(()=>{let t="";for(let e=0;e<this.themes.length;e++){const i=this.themes[e];t+=`\n                ${"."+this.makeThemeStart(e)} .litebokz-header .litebokz-button:hover .litebokz-button-main {\n                    background-color: hsla(\n                        ${i.hue},\n                        ${i.saturate}%,\n                        ${i.light+(i.light<50?20:-20)}%, .7)\n                }`}return t})()}\n\n            .litebokz-header .litebokz-button:active .litebokz-button-main {\n                transform: scale(.8)\n            }\n\n            .litebokz-header .litebokz-button svg,\n            .litebokz-header .litebokz-button path {\n                position: relative;\n                z-index: 1;\n                width: 27px;\n                height: 100%;\n                fill: none;\n                stroke-width: .15;\n                stroke-linecap: round;\n                stroke-linejoin: round;\n                transition: ${i}\n            }\n\n            ${(()=>{let t="";for(let e=0;e<this.themes.length;e++){const i=this.themes[e],n="."+this.makeThemeStart(e);t+=`\n                ${n} .litebokz-header .litebokz-button svg,\n                ${n} .litebokz-header .litebokz-button path {\n                    stroke: hsl(0,0%,${i.light<50?100:0}%);\n                }`}return t})()}\n\n            .litebokz-header .litebokz-button.disable svg,\n            .litebokz-header .litebokz-button.disable path {\n                opacity: .5\n            }\n\n            /* Logo */\n            .litebokz-footer .litebokz-logo {\n                flex: 0 0 auto;\n                margin-left: auto;\n                margin-right: 0;\n                height: 100%;\n                padding: 5px;\n                ${this.settings.hasWordmark?"":"display: none;"};\n            }\n\n            .litebokz-footer .litebokz-logo svg,\n            .litebokz-footer .litebokz-logo path {\n                width: 100%;\n                height: 100%;\n                transition: ${i}\n            }\n\n            ${(()=>{let t="";for(let e=0;e<this.themes.length;e++){const i=this.themes[e],n="."+this.makeThemeStart(e);t+=`\n                ${n} .litebokz-footer .litebokz-logo svg,\n                ${n} .litebokz-footer .litebokz-logo path {\n                    width: 100%;\n                    height: 100%;\n                    fill: hsla(\n                        ${i.hue},\n                        ${i.saturate}%,\n                        ${i.light+(i.light<50?40:-40)}%,\n                        ${.5*i.alpha});\n                }`}return t})()}\n\n            .litebokz-left {\n                padding-left: 10px;\n                height: fit-content;\n                font-weight: 100;\n                font-size: 18px;\n                align-self: center;\n\n                display: -webkit-box;\n                -webkit-box-orient: vertical;\n                -webkit-line-clamp: 2;\n                line-clamp: 2;\n                overflow: hidden;\n                white-space: normal;\n                text-overflow: ellipsis;\n            }\n\n            .litebokz-nav {\n                position: absolute;\n                top: 50%;\n                width: 50px;\n                height: 100%;\n                border: none;\n                background: transparent;\n                cursor: pointer;\n                transition: ${i};\n                opacity: 0;\n                padding: 0;\n                transform: translateY(-50%);\n            }\n\n            .litebokz-nav-left {\n                left: 0;\n                transform: translate(-100%, -50%);\n            }\n            .litebokz-nav-right {\n                right: 0;\n                transform: translate(100%, -50%);\n            }\n\n            /* Visible Navigation Arrows */\n            .litebokz-open .litebokz-nav {\n                transform: translateY(-50%);\n                opacity: 1;\n                pointer-events: all;\n            }\n\n            /* Hidden Navigation Arrows */\n            .litebokz-open .litebokz-nav.hidden {\n                pointer-events: none;\n            }\n\n            .litebokz-nav-main {\n                width: 100%;\n                height: 100%;\n                display: flex;\n                align-items: center;\n                justify-content: center;\n                transform: scale(1);\n                opacity: 1;\n                transition: ${n}\n            }\n\n            .litebokz-open .litebokz-nav-main:active {\n                transform: scale(.8)\n            }\n            .litebokz-open .litebokz-nav.hidden .litebokz-nav-main {\n                transform: scale(.5);\n                opacity: 0;\n            }\n\n            .litebokz-nav-main svg,\n            .litebokz-nav-main path {\n                stroke-width: .15;\n                fill: none;\n                stroke-linecap: round;\n                stroke-linejoin: round;\n                transition: ${i};\n            }\n\n            ${(()=>{let t="";for(let e=0;e<this.themes.length;e++){const i=this.themes[e],n="."+this.makeThemeStart(e),s=i.light>70&&i.alpha>.8;t+=`\n                ${n} .litebokz-nav-main svg,\n                ${n} .litebokz-nav-main path {\n                    stroke: hsl(0,0%,${s?0:100}%);\n                    ${s?"":"filter: drop-shadow(1px 1px 5px #0009)"};\n                }`}return t})()}\n\n            @media screen and (max-width: 500px) {\n                .litebokz-logo {\n                    display: none;\n                }\n                .litebokz-left {\n                    font-size: 15px;\n                }\n                .litebokz-header-right {\n                    width: 100%\n                }\n                .litebokz-button {\n                    min-width: 0;\n                    padding: 4px 0;\n                }\n            }\n        </style>\n\n        <div class = "litebokz-hold">\n            <div class = "litebokz-main">\n                <div class = "litebokz-header-hold">\n                    <div class = "litebokz-header">\n                        <div class = "litebokz-header-right">\n                            ${(()=>{let t="";for(let e=0;e<this.tools.length;e++){const i=this.tools[e];t+=(this.toolIcons[i]||"")+"\n"}return t})()}\n                        </div>\n                    </div>\n                </div>\n                <div class = "litebokz-display-hold">\n                    <div class = "litebokz-display">\n                        <div class = "litebokz-img-holder">\n                            <img draggable = "false" id = "litebokz-img-1" class = "litebokz-img" src = "${this.placeholder}">\n                            <img draggable = "false" id = "litebokz-img-2" class = "litebokz-img" src = "${this.placeholder}">\n                            <img draggable = "false" id = "litebokz-img-3" class = "litebokz-img" src = "${this.placeholder}">\n                        </div>\n                    </div>\n                    <button class = "litebokz-nav-left litebokz-nav">\n                        <div class = "litebokz-nav-main">\n                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                                <path d="M 1.7 1.1 L 1.3 1.5 L 1.7 1.9" stroke="#000" stroke-width=".1" fill="none"/>\n                            </svg>\n                        </div>\n                    </button>\n                    <button class = "litebokz-nav-right litebokz-nav">\n                        <div class = "litebokz-nav-main">\n                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0.75 0.75 1.5 1.5">\n                                <path d="M 1.3 1.1 L 1.7 1.5 L 1.3 1.9" stroke="#000" stroke-width=".1" fill="none"/>\n                            </svg>\n                        </div>\n                    </button>\n                </div>\n                <div class = "litebokz-footer-hold">\n                    <div class = "litebokz-footer">\n                        <div class = "litebokz-left">\n                            <div id = "litebokz-text"></div>\n                        </div>\n                        <div class = "litebokz-logo">\n                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="1 0.6 69.1 12.65">\n                                <path d="M 1 1 L 1 10.8 C 1 13.6 4.4 13.7 6.1 12.6 L 6.3 10.4 C 5.7 10.6 5 10.5 5 9.5 L 5 1 Z M 6.9 4.4 L 6.9 13 L 10.9 13 L 10.9 4.4 Z M 9.7 0.6 C 11.5 0.6 11.5 3.8 9.7 3.8 L 8.1 3.8 C 6.4 3.8 6.3 0.6 8.1 0.6 Z M 11.6 7 L 11.6 4.4 L 12.9 4.4 L 12.9 2.6 L 16.9 1.5 L 16.9 4.4 L 19 4.4 L 19 7 L 16.9 7 L 16.9 10 C 16.9 10.9 18.5 10.7 19 10.3 L 19.2 12.5 C 16 14.1 13 12.9 13 10.5 L 13 7 Z M 23.5 9.5 L 28.8 9.5 C 30 5.9 26.2 3.2 22.8 4.4 S 19.2 8.6 20 10.5 S 22.4 13 23.7 13.1 S 25.8 13.1 26.8 12.7 S 28.5 11.3 28.8 10.7 L 25.7 9.8 C 25 11 23.5 10.5 23.5 9.5 M 23.4 8 C 23.4 6.4 25.3 6.4 25.3 8 Z M 29.9 1 L 29.9 13 L 33.4 13 L 33.5 11.1 C 34.3 13.6 37.8 13.8 39 11.5 S 39.7 4.9 37.4 4.4 S 34.2 5 33.9 5.8 L 33.9 1 Z M 33.9 8.7 C 33.9 8 34 7 34.8 7 S 35.7 8 35.7 8.7 S 35.6 10.4 34.8 10.4 S 33.9 9.4 33.9 8.7 M 40.4 8.6 C 40.4 2.6 50 2.6 50 8.6 S 40.4 14.6 40.4 8.6 M 44.3 8.7 C 44.3 9.5 44.5 10.5 45.2 10.5 S 46.1 9.4 46.1 8.7 S 46 6.8 45.2 6.8 S 44.3 8 44.3 8.7 M 51 1 L 51 13 L 55 13 L 55 11.3 L 56.1 10 L 57.7 13 L 62 13 L 58.7 7.8 L 61.8 4.4 L 57.5 4.4 L 55 7.4 L 55 1 Z M 62.1 4.4 L 62.1 6.9 L 65.5 6.9 L 62.1 10.7 L 62.1 13 L 70.1 13 L 70.1 10.3 L 66.6 10.3 L 69.9 6.6 L 69.9 4.4 Z"/>\n                            </svg>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>`;e.innerHTML=s,t.style.fontFamily="Arial, monospace",this.holder=e.querySelector(".litebokz-hold"),this.main=e.querySelector(".litebokz-main"),this.header=e.querySelector(".litebokz-header"),this.footer=e.querySelector(".litebokz-footer"),this.display=e.querySelector(".litebokz-display"),this.headerHold=e.querySelector(".litebokz-header-hold"),this.footerHold=e.querySelector(".litebokz-footer-hold"),this.displayHold=e.querySelector(".litebokz-display-hold"),this.navLeft=e.querySelector(".litebokz-nav-left"),this.navRight=e.querySelector(".litebokz-nav-right"),this.text=e.getElementById("litebokz-text"),this.settings.tapToHidePanels&&(this.click(this.headerHold,()=>{this.panelVisible||this.togglePanels(!0)}),this.click(this.footerHold,()=>{this.panelVisible||this.togglePanels(!0)}),this.click(this.display,()=>this.togglePanels())),this.settings.tapAwayToClose&&this.click(this.display,t=>{t.target&&t.target!=this.image&&this.close()}),this.minusBtn=e.getElementById("litebokz-minus"),this.plusBtn=e.getElementById("litebokz-plus");const o=e.getElementById("litebokz-theme"),l=e.getElementById("litebokz-download");this.fitBtn=e.getElementById("litebokz-fit");const a=e.getElementById("litebokz-fullscreen"),h=e.getElementById("litebokz-close"),r=e.getElementById("litebokz-fullscreen-path"),m=()=>{if(Math.abs(this.zoomSmooth)<.01)return this.zoomSmooth=0,void(this.zoomSmoothID=null);const t=this.settings.zoomIncrement*this.zoomSmooth;this.zoom({clientX:innerWidth/2,clientY:innerHeight/2,deltaY:-t*this.scale}),this.updateDisplay(),this.zoomSmooth*=.7,this.zoomSmoothID=requestAnimationFrame(m)};m(),this.click(this.minusBtn,t=>{this.zoomSmooth=-1,m()}),this.click(this.plusBtn,t=>{this.zoomSmooth=1,m()}),this.click(o,()=>{this.setTheme(this.selectedTheme+1)}),this.click(l,()=>{if(!this.image)return;const t=this.sanitize(this.text.textContent),e=document.createElement("a");e.href=this.image.src,e.download=`litebokz-${t}.png`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}),this.click(this.fitBtn,()=>{this.zoomAmt=1,this.camX=0,this.camY=0,this.fitBtn.classList.add("disable"),this.updateDisplay()}),this.click(a,()=>this.toggleFullscreen()),this.click(h,()=>this.close()),this.imageHolder=e.querySelector(".litebokz-img-holder"),this.image1=e.getElementById("litebokz-img-1"),this.image1.litebokzID=1,this.image2=e.getElementById("litebokz-img-2"),this.image2.litebokzID=2,this.image3=e.getElementById("litebokz-img-3"),this.image3.litebokzID=3,this.image=this.image1,this.shadow=e,addEventListener("fullscreenchange",()=>{r&&(document.fullscreenElement?r.setAttribute("d",this.minIcon):r.setAttribute("d",this.fullIcon))})}}const litebokz=new LiteBokz;